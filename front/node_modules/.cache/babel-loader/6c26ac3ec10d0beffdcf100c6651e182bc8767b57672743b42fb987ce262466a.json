{"ast":null,"code":"import { getAuthToken, setAuthToken, setCurrentUser } from '@/utils/auth';\nimport { findMockUser } from '@/data/mockUsers';\nexport default {\n  name: 'LoginView',\n  data() {\n    return {\n      form: {\n        username: '',\n        password: ''\n      },\n      remember: true,\n      message: '',\n      loading: false\n    };\n  },\n  created() {\n    if (getAuthToken()) {\n      this.redirectAfterLogin();\n    }\n  },\n  methods: {\n    redirectAfterLogin() {\n      const redirect = this.$route.query.redirect;\n      const target = typeof redirect === 'string' ? redirect : '/';\n      this.$router.replace(target);\n    },\n    handleSubmit() {\n      this.message = '';\n      if (!this.form.username || !this.form.password) {\n        this.message = '请填写用户名和密码';\n        return;\n      }\n      this.loading = true;\n      setTimeout(() => {\n        const user = findMockUser(this.form.username, this.form.password);\n        if (!user) {\n          this.loading = false;\n          this.message = '账号或密码不正确';\n          return;\n        }\n        const mockToken = `mock-token-${Date.now()}`;\n        setAuthToken(mockToken, this.remember);\n        setCurrentUser(user.username, this.remember);\n        this.message = `欢迎回来，${user.name}，正在跳转…`;\n        this.loading = false;\n        setTimeout(() => this.redirectAfterLogin(), 200);\n      }, 1000);\n    }\n  }\n};","map":{"version":3,"names":["getAuthToken","setAuthToken","setCurrentUser","findMockUser","name","data","form","username","password","remember","message","loading","created","redirectAfterLogin","methods","redirect","$route","query","target","$router","replace","handleSubmit","setTimeout","user","mockToken","Date","now"],"sources":["C:\\Users\\13765\\Desktop\\vitualieve\\front\\Virtual-Live\\front\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\r\n  <div class=\"auth-page\">\r\n    <div class=\"neon-orbit\"></div>\r\n    <div class=\"auth-card\">\r\n      <div class=\"card-header\">\r\n\r\n        <h1>欢迎回来</h1>\r\n        <p class=\"subtitle\">登录以同步观影历史、观看进度和个性推荐。</p>\r\n      </div>\r\n\r\n      <form class=\"auth-form\" @submit.prevent=\"handleSubmit\">\r\n        <label>\r\n          <span>用户名</span>\r\n          <input\r\n            v-model.trim=\"form.username\"\r\n            type=\"text\"\r\n            placeholder=\"请输入用户名\"\r\n            required\r\n          >\r\n        </label>\r\n\r\n        <label>\r\n          <span>密码</span>\r\n          <input\r\n            v-model=\"form.password\"\r\n            type=\"password\"\r\n            placeholder=\"请输入密码\"\r\n            minlength=\"6\"\r\n            required\r\n          >\r\n        </label>\r\n\r\n        <div class=\"form-meta\">\r\n          <label class=\"remember\">\r\n            <input v-model=\"remember\" type=\"checkbox\">\r\n            <span>保持登录</span>\r\n          </label>\r\n          <button class=\"link\" type=\"button\">忘记密码？</button>\r\n        </div>\r\n\r\n        <button class=\"primary\" type=\"submit\">\r\n          <span v-if=\"!loading\">立即登录</span>\r\n          <span v-else>正在读取登录态…</span>\r\n        </button>\r\n\r\n        <p v-if=\"message\" class=\"message\">{{ message }}</p>\r\n      </form>\r\n\r\n      <div class=\"card-footer\">\r\n        还没有账号？\r\n        <router-link to=\"/register\">前往注册</router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAuthToken, setAuthToken, setCurrentUser } from '@/utils/auth'\r\nimport { findMockUser } from '@/data/mockUsers'\r\n\r\nexport default {\r\n  name: 'LoginView',\r\n  data() {\r\n    return {\r\n      form: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      remember: true,\r\n      message: '',\r\n      loading: false\r\n    }\r\n  },\r\n  created() {\r\n    if (getAuthToken()) {\r\n      this.redirectAfterLogin()\r\n    }\r\n  },\r\n  methods: {\r\n    redirectAfterLogin() {\r\n      const redirect = this.$route.query.redirect\r\n      const target = typeof redirect === 'string' ? redirect : '/'\r\n      this.$router.replace(target)\r\n    },\r\n    handleSubmit() {\r\n      this.message = ''\r\n\r\n      if (!this.form.username || !this.form.password) {\r\n        this.message = '请填写用户名和密码'\r\n        return\r\n      }\r\n\r\n      this.loading = true\r\n      setTimeout(() => {\r\n        const user = findMockUser(this.form.username, this.form.password)\r\n\r\n        if (!user) {\r\n          this.loading = false\r\n          this.message = '账号或密码不正确'\r\n          return\r\n        }\r\n\r\n        const mockToken = `mock-token-${Date.now()}`\r\n        setAuthToken(mockToken, this.remember)\r\n        setCurrentUser(user.username, this.remember)\r\n        this.message = `欢迎回来，${user.name}，正在跳转…`\r\n        this.loading = false\r\n        setTimeout(() => this.redirectAfterLogin(), 200)\r\n      }, 1000)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.auth-page {\r\n  position: relative;\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px 20px;\r\n  background: linear-gradient(135deg, #fef7ff 0%, #f5f0ff 50%, #fff0f8 100%);\r\n  overflow: hidden;\r\n}\r\n\r\n.neon-orbit {\r\n  position: absolute;\r\n  width: 520px;\r\n  height: 520px;\r\n  border-radius: 50%;\r\n  background: radial-gradient(circle, rgba(255, 105, 180, 0.15), transparent 60%);\r\n  filter: blur(10px);\r\n  animation: pulse 6s ease-in-out infinite;\r\n}\r\n\r\n.auth-card {\r\n  width: 100%;\r\n  max-width: 420px;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border: 1px solid rgba(255, 105, 180, 0.2);\r\n  border-radius: 30px;\r\n  padding: 36px;\r\n  box-shadow: 0 20px 60px rgba(255, 105, 180, 0.2);\r\n  backdrop-filter: blur(30px);\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.card-header h1 {\r\n  margin: 8px 0;\r\n  font-size: 32px;\r\n  color: #2d2d2d;\r\n}\r\n\r\n.badge {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  padding: 4px 12px;\r\n  border-radius: 999px;\r\n  background: rgba(255, 105, 180, 0.15);\r\n  color: #ff69b4;\r\n  font-size: 12px;\r\n  letter-spacing: 0.08em;\r\n  text-transform: uppercase;\r\n}\r\n\r\n.subtitle {\r\n  color: rgba(45, 45, 45, 0.7);\r\n  margin: 0;\r\n}\r\n\r\n.auth-form {\r\n  margin-top: 28px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 18px;\r\n}\r\n\r\nlabel span {\r\n  display: block;\r\n  margin-bottom: 6px;\r\n  font-weight: 600;\r\n  color: #2d2d2d;\r\n}\r\n\r\ninput[type='text'],\r\ninput[type='email'],\r\ninput[type='password'] {\r\n  width: 100%;\r\n  border: 1px solid rgba(255, 105, 180, 0.3);\r\n  border-radius: 16px;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  color: #2d2d2d;\r\n  padding: 14px 16px;\r\n  font-size: 15px;\r\n  transition: border 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;\r\n}\r\n\r\ninput[type='text']::placeholder,\r\ninput[type='email']::placeholder,\r\ninput[type='password']::placeholder {\r\n  color: rgba(45, 45, 45, 0.5);\r\n}\r\n\r\ninput:focus {\r\n  border-color: #ff69b4;\r\n  outline: none;\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 2px 8px rgba(255, 105, 180, 0.2);\r\n}\r\n\r\n.form-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-size: 14px;\r\n}\r\n\r\n.remember {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: rgba(45, 45, 45, 0.8);\r\n}\r\n\r\n.link {\r\n  border: none;\r\n  background: none;\r\n  color: #ff69b4;\r\n  cursor: pointer;\r\n  transition: color 0.2s ease;\r\n}\r\n\r\n.link:hover {\r\n  color: #9370db;\r\n}\r\n\r\n.primary {\r\n  width: 100%;\r\n  padding: 16px;\r\n  border-radius: 18px;\r\n  border: none;\r\n  background: linear-gradient(120deg, #546dff, #9e7aff);\r\n  color: #fff;\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n}\r\n\r\n.primary:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 20px 30px rgba(84, 109, 255, 0.25);\r\n}\r\n\r\n.message {\r\n  text-align: center;\r\n  color: #ff69b4;\r\n  font-size: 14px;\r\n}\r\n\r\n.card-footer {\r\n  margin-top: 24px;\r\n  text-align: center;\r\n  color: rgba(45, 45, 45, 0.7);\r\n}\r\n\r\n.card-footer a {\r\n  color: #ff69b4;\r\n  font-weight: 600;\r\n  margin-left: 4px;\r\n  transition: color 0.2s ease;\r\n}\r\n\r\n.card-footer a:hover {\r\n  color: #9370db;\r\n}\r\n\r\n@keyframes pulse {\r\n  0% { transform: scale(0.9); opacity: 0.7; }\r\n  50% { transform: scale(1.1); opacity: 1; }\r\n  100% { transform: scale(0.9); opacity: 0.7; }\r\n}\r\n</style>\r\n\r\n"],"mappings":"AAyDA,SAASA,YAAY,EAAEC,YAAY,EAAEC,cAAa,QAAS,cAAa;AACxE,SAASC,YAAW,QAAS,kBAAiB;AAE9C,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE;MACZ,CAAC;MACDC,QAAQ,EAAE,IAAI;MACdC,OAAO,EAAE,EAAE;MACXC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAIZ,YAAY,CAAC,CAAC,EAAE;MAClB,IAAI,CAACa,kBAAkB,CAAC;IAC1B;EACF,CAAC;EACDC,OAAO,EAAE;IACPD,kBAAkBA,CAAA,EAAG;MACnB,MAAME,QAAO,GAAI,IAAI,CAACC,MAAM,CAACC,KAAK,CAACF,QAAO;MAC1C,MAAMG,MAAK,GAAI,OAAOH,QAAO,KAAM,QAAO,GAAIA,QAAO,GAAI,GAAE;MAC3D,IAAI,CAACI,OAAO,CAACC,OAAO,CAACF,MAAM;IAC7B,CAAC;IACDG,YAAYA,CAAA,EAAG;MACb,IAAI,CAACX,OAAM,GAAI,EAAC;MAEhB,IAAI,CAAC,IAAI,CAACJ,IAAI,CAACC,QAAO,IAAK,CAAC,IAAI,CAACD,IAAI,CAACE,QAAQ,EAAE;QAC9C,IAAI,CAACE,OAAM,GAAI,WAAU;QACzB;MACF;MAEA,IAAI,CAACC,OAAM,GAAI,IAAG;MAClBW,UAAU,CAAC,MAAM;QACf,MAAMC,IAAG,GAAIpB,YAAY,CAAC,IAAI,CAACG,IAAI,CAACC,QAAQ,EAAE,IAAI,CAACD,IAAI,CAACE,QAAQ;QAEhE,IAAI,CAACe,IAAI,EAAE;UACT,IAAI,CAACZ,OAAM,GAAI,KAAI;UACnB,IAAI,CAACD,OAAM,GAAI,UAAS;UACxB;QACF;QAEA,MAAMc,SAAQ,GAAI,cAAcC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAC;QAC3CzB,YAAY,CAACuB,SAAS,EAAE,IAAI,CAACf,QAAQ;QACrCP,cAAc,CAACqB,IAAI,CAAChB,QAAQ,EAAE,IAAI,CAACE,QAAQ;QAC3C,IAAI,CAACC,OAAM,GAAI,QAAQa,IAAI,CAACnB,IAAI,QAAO;QACvC,IAAI,CAACO,OAAM,GAAI,KAAI;QACnBW,UAAU,CAAC,MAAM,IAAI,CAACT,kBAAkB,CAAC,CAAC,EAAE,GAAG;MACjD,CAAC,EAAE,IAAI;IACT;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}