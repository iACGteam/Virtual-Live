{"ast":null,"code":"import { createRouter, createWebHashHistory } from 'vue-router';\nimport HomeView from '../views/HomeView.vue';\nimport LiveView from '../views/LiveView.vue';\nimport ProfileView from '../views/ProfileView.vue';\nimport LoginView from '../views/LoginView.vue';\nimport RegisterView from '../views/RegisterView.vue';\nimport UploadVideoView from '../views/UploadVideoView.vue';\nimport { getAuthToken } from '@/utils/auth';\nconst routes = [{\n  path: '/',\n  name: 'home',\n  component: HomeView,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/live',\n  name: 'live',\n  component: LiveView,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/profile',\n  name: 'profile',\n  component: ProfileView,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: '/login',\n  name: 'login',\n  component: LoginView,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: '/register',\n  name: 'register',\n  component: RegisterView,\n  meta: {\n    requiresAuth: false\n  }\n}, {\n  path: '/upload-video',\n  name: 'upload-video',\n  component: UploadVideoView,\n  meta: {\n    requiresAuth: true\n  }\n},\n//直播间\n{\n  path: '/live-room',\n  name: 'LiveRoom',\n  component: () => import('../views/LiveRoomView.vue')\n}, {\n  path: '/community',\n  name: 'Community',\n  component: () => import('../views/CommunityView.vue')\n},\n//看视频\n{\n  path: '/video',\n  name: 'Video',\n  component: () => import('../views/Video.vue')\n},\n//开直播\n{\n  path: '/live-going',\n  name: 'LiveGoing',\n  component: () => import('../views/LiveGoingView.vue')\n}, {\n  path: '/live-manage',\n  name: 'Manage',\n  component: () => import('../views/LiveManage.vue')\n}, {\n  path: '/com-detail',\n  name: 'CommunityDetail',\n  component: () => import('../components/community/ComDetailNav.vue')\n}, {\n  path: \"/new-live\",\n  name: \"NewLiveRoom\",\n  component: () => import('../views/LiveRoomView.vue')\n}];\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  const token = getAuthToken();\n  const requiresAuth = to.meta?.requiresAuth !== false;\n  const redirectQuery = to.query?.redirect;\n  const redirectPath = typeof redirectQuery === 'string' ? redirectQuery : '/';\n  if (requiresAuth && !token) {\n    next({\n      name: 'login',\n      query: {\n        redirect: to.fullPath\n      }\n    });\n    return;\n  }\n  if (!requiresAuth && token) {\n    next(redirectPath);\n    return;\n  }\n  next();\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHashHistory","HomeView","LiveView","ProfileView","LoginView","RegisterView","UploadVideoView","getAuthToken","routes","path","name","component","meta","requiresAuth","router","history","beforeEach","to","from","next","token","redirectQuery","query","redirect","redirectPath","fullPath"],"sources":["C:/Users/13765/Desktop/vitualieve/front/Virtual-Live/front/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHashHistory } from 'vue-router'\r\nimport HomeView from '../views/HomeView.vue'\r\nimport LiveView from '../views/LiveView.vue'\r\nimport ProfileView from '../views/ProfileView.vue'\r\nimport LoginView from '../views/LoginView.vue'\r\nimport RegisterView from '../views/RegisterView.vue'\r\nimport UploadVideoView from '../views/UploadVideoView.vue'\r\nimport { getAuthToken } from '@/utils/auth'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'home',\r\n    component: HomeView,\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/live',\r\n    name: 'live',\r\n    component: LiveView,\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/profile',\r\n    name: 'profile',\r\n    component: ProfileView,\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'login',\r\n    component: LoginView,\r\n    meta: { requiresAuth: false }\r\n  },\r\n  {\r\n    path: '/register',\r\n    name: 'register',\r\n    component: RegisterView,\r\n    meta: { requiresAuth: false }\r\n  },\r\n  {\r\n    path: '/upload-video',\r\n    name: 'upload-video',\r\n    component: UploadVideoView,\r\n    meta: { requiresAuth: true }\r\n  },\r\n\r\n  //直播间\r\n  {\r\n    path: '/live-room',\r\n    name: 'LiveRoom',\r\n    component: () => import('../views/LiveRoomView.vue')\r\n  },\r\n  {\r\n    path: '/community',\r\n    name: 'Community',\r\n    component: () => import('../views/CommunityView.vue')\r\n  },\r\n  \r\n  //看视频\r\n  {\r\n    path: '/video',\r\n    name: 'Video',\r\n    component: () => import('../views/Video.vue')\r\n  },\r\n  //开直播\r\n  {\r\n    path: '/live-going',\r\n    name: 'LiveGoing',\r\n    component: () => import('../views/LiveGoingView.vue')\r\n  },\r\n  {\r\n    path: '/live-manage',\r\n    name: 'Manage',\r\n    component: () => import('../views/LiveManage.vue')\r\n  },\r\n  {\r\n    path: '/com-detail',\r\n    name: 'CommunityDetail',\r\n    component: () => import('../components/community/ComDetailNav.vue')\r\n  },\r\n  {\r\n    path: \"/new-live\",\r\n    name: \"NewLiveRoom\",\r\n    component: () => import('../views/LiveRoomView.vue')\r\n  },\r\n\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  const token = getAuthToken()\r\n  const requiresAuth = to.meta?.requiresAuth !== false\r\n  const redirectQuery = to.query?.redirect\r\n  const redirectPath = typeof redirectQuery === 'string' ? redirectQuery : '/'\r\n\r\n  if (requiresAuth && !token) {\r\n    next({\r\n      name: 'login',\r\n      query: { redirect: to.fullPath }\r\n    })\r\n    return\r\n  }\r\n\r\n  if (!requiresAuth && token) {\r\n    next(redirectPath)\r\n    return\r\n  }\r\n\r\n  next()\r\n})\r\n\r\nexport default router\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}