{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nexport default {\n  name: 'UploadVideoView',\n  data() {\n    return {\n      isDragOver: false,\n      selectedFile: null,\n      videoPreview: '',\n      coverFile: null,\n      coverPreview: '',\n      hasVideoUploaded: false,\n      videoDuration: null,\n      form: {\n        title: '',\n        desc: '',\n        visibility: 'public'\n      },\n      defaultThumbnail: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8Xw8AAn8B9nkRVKkAAAAASUVORK5CYII=',\n      selectedTopic: '',\n      topicOptions: [{\n        key: 'vsinger',\n        label: '虚拟singer'\n      }, {\n        key: 'vgamer',\n        label: '虚拟gamer'\n      }, {\n        key: 'vseiyuu',\n        label: '虚拟声优'\n      }, {\n        key: 'vmale',\n        label: '虚拟男V'\n      }]\n    };\n  },\n  computed: {\n    topicTagMap() {\n      return {\n        vsinger: 'Music',\n        vgamer: 'Esports',\n        vseiyuu: 'Podcast',\n        vmale: 'Stage'\n      };\n    },\n    topicLabelMap() {\n      return this.topicOptions.reduce((acc, cur) => {\n        acc[cur.key] = cur.label;\n        return acc;\n      }, {});\n    }\n  },\n  methods: {\n    goBack() {\n      // 如果有历史记录，返回上一页；否则返回首页\n      if (window.history.length > 1) {\n        this.$router.go(-1);\n      } else {\n        this.$router.push({\n          path: '/'\n        });\n      }\n    },\n    triggerFileInput() {\n      this.$refs.videoInput?.click();\n    },\n    triggerCoverInput() {\n      this.$refs.coverInput?.click();\n    },\n    handleFileSelect(event) {\n      const file = event.target.files?.[0];\n      if (file) {\n        this.setSelectedVideo(file);\n      }\n    },\n    handleDrop(event) {\n      event.preventDefault();\n      this.isDragOver = false;\n      const file = event.dataTransfer?.files?.[0];\n      if (file) {\n        this.setSelectedVideo(file);\n      }\n    },\n    setSelectedVideo(file) {\n      if (!file.type.startsWith('video/')) {\n        alert('请选择视频文件');\n        return;\n      }\n      const maxSize = 500 * 1024 * 1024; // 500MB\n      if (file.size > maxSize) {\n        alert('视频文件过大（超过500MB），请选择更小的文件');\n        return;\n      }\n      if (this.videoPreview) {\n        URL.revokeObjectURL(this.videoPreview);\n      }\n      this.selectedFile = file;\n      this.hasVideoUploaded = true;\n      this.videoPreview = URL.createObjectURL(file);\n      // 同时保存视频的blob URL，供后续查看时使用\n      this.$data.selectedVideoUrl = this.videoPreview;\n      this.extractVideoDuration(file);\n      if (!this.form.title) {\n        this.form.title = file.name.replace(/\\.[^/.]+$/, '');\n      }\n    },\n    handleCoverSelect(event) {\n      const file = event.target.files?.[0];\n      if (file) {\n        this.processCover(file);\n      }\n    },\n    handleCoverDrop(event) {\n      event.preventDefault();\n      const file = event.dataTransfer?.files?.[0];\n      if (file) {\n        this.processCover(file);\n      }\n    },\n    processCover(file) {\n      if (!file.type.startsWith('image/')) {\n        alert('请上传图片作为封面');\n        return;\n      }\n      const maxSize = 2 * 1024 * 1024; // 2MB\n      if (file.size > maxSize) {\n        alert('封面图片过大（超过2MB），请选择较小的图片');\n        return;\n      }\n      const reader = new FileReader();\n      reader.onload = e => {\n        this.coverFile = file;\n        this.coverPreview = e.target.result;\n        // 同时保存到sessionStorage用于临时存储\n        this.coverDataUrl = e.target.result;\n      };\n      reader.onerror = () => {\n        alert('读取封面失败，请重试');\n      };\n      reader.readAsDataURL(file);\n    },\n    selectTopic(topicKey) {\n      this.selectedTopic = topicKey;\n    },\n    saveVideo() {\n      if (!this.selectedFile) {\n        alert('请先选择要上传的视频');\n        return;\n      }\n      this.processFile(this.selectedFile);\n    },\n    async processFile(file) {\n      const maxSize = 500 * 1024 * 1024; // 500MB\n      if (file.size > maxSize) {\n        alert('视频文件过大（超过500MB），请选择更小的文件');\n        return;\n      }\n\n      // 保存视频的blob URL到sessionStorage，供后续查看时使用\n      const videoUrl = URL.createObjectURL(file);\n      const videoId = Date.now();\n      sessionStorage.setItem(`videoBlob_${videoId}`, videoUrl);\n\n      // 保存封面到sessionStorage（如果有的话）\n      let coverKey = null;\n      if (this.coverDataUrl) {\n        coverKey = `coverBlob_${videoId}`;\n        sessionStorage.setItem(coverKey, this.coverDataUrl);\n      }\n\n      // 读取用户信息（用于获取用户名）\n      let userName = 'zk3zy'; // 默认用户名\n      try {\n        const profileData = localStorage.getItem('profileUser');\n        if (profileData) {\n          const parsed = JSON.parse(profileData);\n          if (parsed.name) {\n            userName = parsed.name;\n          }\n        }\n      } catch (err) {\n        console.warn('读取用户信息失败', err);\n      }\n      const duration = this.videoDuration ? this.formatDuration(Math.round(this.videoDuration)) : this.formatDuration(Math.floor(Math.random() * 300 + 10)); // 10-310秒兜底\n      const primaryTag = this.topicLabelMap[this.selectedTopic] || this.selectedTopic || '未分类';\n      const title = this.form.title && this.form.title.trim() || file.name.replace(/\\.[^/.]+$/, '');\n      const desc = this.form.desc && this.form.desc.trim() || '';\n      const visibility = this.form.visibility === 'private' ? 'private' : 'public';\n      const isPrivate = visibility === 'private';\n\n      // 不再将视频内联到localStorage，避免超出浏览器存储配额（10MB左右就可能失败）\n      let inlineVideoData = '';\n      const videoData = {\n        id: videoId,\n        title,\n        creator: userName,\n        duration: duration,\n        views: '0次观看',\n        tags: [primaryTag],\n        thumbnail: this.coverPreview || this.defaultThumbnail,\n        coverKey: coverKey,\n        desc,\n        visibility,\n        isPrivate,\n        uploadTime: new Date().toISOString(),\n        fileName: file.name,\n        fileSize: file.size,\n        fileType: file.type,\n        videoUrl: videoUrl,\n        videoData: inlineVideoData // 不再内联，避免localStorage超限；刷新后大文件需重传\n      };\n\n      // 保存到localStorage\n      this.saveVideoToWorks(videoData);\n\n      // 触发自定义事件，通知其他页面更新\n      window.dispatchEvent(new Event('userWorksUpdated'));\n\n      // 显示成功提示\n      alert('视频上传成功！已添加到我的作品');\n      this.resetForm();\n    },\n    extractVideoDuration(file) {\n      return new Promise(resolve => {\n        const url = URL.createObjectURL(file);\n        const video = document.createElement('video');\n        video.preload = 'metadata';\n        video.onloadedmetadata = () => {\n          URL.revokeObjectURL(url);\n          this.videoDuration = video.duration || null;\n          resolve(this.videoDuration);\n        };\n        video.onerror = () => {\n          URL.revokeObjectURL(url);\n          this.videoDuration = null;\n          resolve(null);\n        };\n        video.src = url;\n      });\n    },\n    formatDuration(seconds) {\n      const mins = Math.floor(seconds / 60);\n      const secs = seconds % 60;\n      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    },\n    saveVideoToWorks(videoData) {\n      try {\n        // 从localStorage读取现有作品\n        const existingWorks = this.getUserWorks();\n\n        // 添加新作品到列表开头\n        existingWorks.unshift(videoData);\n\n        // 保存回localStorage\n        localStorage.setItem('userWorks', JSON.stringify(existingWorks));\n        console.log('视频已保存到作品:', videoData);\n      } catch (err) {\n        console.error('保存作品失败', err);\n        alert('保存作品失败，请重试');\n      }\n    },\n    getUserWorks() {\n      try {\n        const works = localStorage.getItem('userWorks');\n        if (works) {\n          return JSON.parse(works);\n        }\n      } catch (err) {\n        console.warn('读取作品失败', err);\n      }\n      return [];\n    },\n    resetForm() {\n      if (this.videoPreview) {\n        URL.revokeObjectURL(this.videoPreview);\n      }\n      this.isDragOver = false;\n      this.selectedFile = null;\n      this.videoPreview = '';\n      this.coverFile = null;\n      this.coverPreview = '';\n      this.hasVideoUploaded = false;\n      this.videoDuration = null;\n      this.form.title = '';\n      this.form.desc = '';\n      this.form.visibility = 'public';\n      this.selectedTopic = '';\n      if (this.$refs.videoInput) {\n        this.$refs.videoInput.value = '';\n      }\n      if (this.$refs.coverInput) {\n        this.$refs.coverInput.value = '';\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","isDragOver","selectedFile","videoPreview","coverFile","coverPreview","hasVideoUploaded","videoDuration","form","title","desc","visibility","defaultThumbnail","selectedTopic","topicOptions","key","label","computed","topicTagMap","vsinger","vgamer","vseiyuu","vmale","topicLabelMap","reduce","acc","cur","methods","goBack","window","history","length","$router","go","push","path","triggerFileInput","$refs","videoInput","click","triggerCoverInput","coverInput","handleFileSelect","event","file","target","files","setSelectedVideo","handleDrop","preventDefault","dataTransfer","type","startsWith","alert","maxSize","size","URL","revokeObjectURL","createObjectURL","$data","selectedVideoUrl","extractVideoDuration","replace","handleCoverSelect","processCover","handleCoverDrop","reader","FileReader","onload","e","result","coverDataUrl","onerror","readAsDataURL","selectTopic","topicKey","saveVideo","processFile","videoUrl","videoId","Date","now","sessionStorage","setItem","coverKey","userName","profileData","localStorage","getItem","parsed","JSON","parse","err","console","warn","duration","formatDuration","Math","round","floor","random","primaryTag","trim","isPrivate","inlineVideoData","videoData","id","creator","views","tags","thumbnail","uploadTime","toISOString","fileName","fileSize","fileType","saveVideoToWorks","dispatchEvent","Event","resetForm","Promise","resolve","url","video","document","createElement","preload","onloadedmetadata","src","seconds","mins","secs","toString","padStart","existingWorks","getUserWorks","unshift","stringify","log","error","works","value"],"sources":["C:\\Users\\13765\\Desktop\\vitualieve\\front\\Virtual-Live\\front\\src\\views\\UploadVideoView.vue"],"sourcesContent":["<template>\r\n  <div class=\"upload-page\">\r\n    <header class=\"page-header\">\r\n      <div class=\"brand\">\r\n        <div class=\"logo\">VL</div>\r\n        <div class=\"brand-text\">\r\n          <h1>VirtuaLive</h1>\r\n          <p>虚拟互动中心</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"header-right\">\r\n        <button class=\"back-btn\" @click=\"goBack\">\r\n          <span class=\"back-icon\">←</span>\r\n          返回\r\n        </button>\r\n      </div>\r\n    </header>\r\n\r\n    <main class=\"page-body\">\r\n      <div class=\"page-content\" :class=\"{ 'with-info': hasVideoUploaded }\">\r\n        <div class=\"content\">\r\n          <div class=\"upload-container\">\r\n            <div\r\n              v-if=\"!hasVideoUploaded\"\r\n              class=\"upload-area\"\r\n              :class=\"{ 'drag-over': isDragOver }\"\r\n              @click=\"triggerFileInput\"\r\n              @dragover.prevent=\"isDragOver = true\"\r\n              @dragleave.prevent=\"isDragOver = false\"\r\n              @drop.prevent=\"handleDrop\"\r\n            >\r\n              <input ref=\"videoInput\" type=\"file\" accept=\"video/*\" hidden @change=\"handleFileSelect\" />\r\n              <div class=\"upload-box\">\r\n                <div class=\"upload-icon\">⬆️</div>\r\n                <p class=\"upload-text\">点击或拖拽上传视频</p>\r\n                <p class=\"upload-subtext\">支持 MP4/MOV/AVI，大小上限 500MB</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div v-if=\"hasVideoUploaded\" class=\"right-column\">\r\n              <div class=\"info-panel\">\r\n                <h3 class=\"info-title\">视频信息</h3>\r\n                <div class=\"field\">\r\n                  <label>标题</label>\r\n                  <input v-model=\"form.title\" type=\"text\" placeholder=\"给视频取个标题吧\" maxlength=\"30\" />\r\n                  <div class=\"field-hint\">{{ form.title.length }}/30</div>\r\n                </div>\r\n                <div class=\"field\">\r\n                  <label>简介</label>\r\n                  <textarea v-model=\"form.desc\" placeholder=\"简单介绍一下视频内容\" maxlength=\"200\"></textarea>\r\n                  <div class=\"field-hint\">{{ form.desc.length }}/200</div>\r\n                </div>\r\n                <div class=\"field\">\r\n                  <label>谁可以看</label>\r\n                  <div class=\"pill-group\">\r\n                    <button\r\n                      type=\"button\"\r\n                      :class=\"['pill', { active: form.visibility === 'public' }]\"\r\n                      @click=\"form.visibility = 'public'\"\r\n                    >\r\n                      公开\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      :class=\"['pill', { active: form.visibility === 'private' }]\"\r\n                      @click=\"form.visibility = 'private'\"\r\n                    >\r\n                      私密\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"info-panel\">\r\n                <p class=\"section-title\">上传视频封面</p>\r\n                <div class=\"cover-upload-box\" @click=\"triggerCoverInput\" @dragover.prevent @drop.prevent=\"handleCoverDrop\">\r\n                  <input ref=\"coverInput\" type=\"file\" accept=\"image/*\" hidden @change=\"handleCoverSelect\" />\r\n                  <div v-if=\"!coverPreview\" class=\"cover-placeholder\">点击或拖拽图片上传</div>\r\n                  <img v-else :src=\"coverPreview\" alt=\"cover preview\" class=\"cover-preview\" />\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"info-panel\">\r\n                <p class=\"section-title\">选择标签</p>\r\n                <div class=\"tag-list\">\r\n                  <button\r\n                    v-for=\"option in topicOptions\"\r\n                    :key=\"option.key\"\r\n                    :class=\"['tag', { active: selectedTopic === option.key }]\"\r\n                    @click=\"selectTopic(option.key)\"\r\n                  >\r\n                    {{ option.label }}\r\n                  </button>\r\n                </div>\r\n                <p class=\"tag-hint\">标签将决定视频展示分类</p>\r\n              </div>\r\n\r\n              <div class=\"info-panel\" v-if=\"videoPreview\">\r\n                <p class=\"section-title\">视频预览</p>\r\n                <video controls :src=\"videoPreview\" class=\"preview-player\"></video>\r\n              </div>\r\n\r\n              <div class=\"action-buttons\">\r\n                <button class=\"btn primary\" @click=\"saveVideo\">上传视频</button>\r\n                <button class=\"btn ghost\" @click=\"resetForm\">重新选择</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'UploadVideoView',\r\n  data() {\r\n    return {\r\n      isDragOver: false,\r\n      selectedFile: null,\r\n      videoPreview: '',\r\n      coverFile: null,\r\n      coverPreview: '',\r\n      hasVideoUploaded: false,\r\n      videoDuration: null,\r\n      form: {\r\n        title: '',\r\n        desc: '',\r\n        visibility: 'public'\r\n      },\r\n      defaultThumbnail: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8Xw8AAn8B9nkRVKkAAAAASUVORK5CYII=',\r\n      selectedTopic: '',\r\n      topicOptions: [\r\n        { key: 'vsinger', label: '虚拟singer' },\r\n        { key: 'vgamer', label: '虚拟gamer' },\r\n        { key: 'vseiyuu', label: '虚拟声优' },\r\n        { key: 'vmale', label: '虚拟男V' }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    topicTagMap() {\r\n      return {\r\n        vsinger: 'Music',\r\n        vgamer: 'Esports',\r\n        vseiyuu: 'Podcast',\r\n        vmale: 'Stage'\r\n      }\r\n    },\r\n    topicLabelMap() {\r\n      return this.topicOptions.reduce((acc, cur) => {\r\n        acc[cur.key] = cur.label\r\n        return acc\r\n      }, {})\r\n    }\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      // 如果有历史记录，返回上一页；否则返回首页\r\n      if (window.history.length > 1) {\r\n        this.$router.go(-1)\r\n      } else {\r\n        this.$router.push({ path: '/' })\r\n      }\r\n    },\r\n    triggerFileInput() {\r\n      this.$refs.videoInput?.click()\r\n    },\r\n    triggerCoverInput() {\r\n      this.$refs.coverInput?.click()\r\n    },\r\n    handleFileSelect(event) {\r\n      const file = event.target.files?.[0]\r\n      if (file) {\r\n        this.setSelectedVideo(file)\r\n      }\r\n    },\r\n    handleDrop(event) {\r\n      event.preventDefault()\r\n      this.isDragOver = false\r\n      const file = event.dataTransfer?.files?.[0]\r\n      if (file) {\r\n        this.setSelectedVideo(file)\r\n      }\r\n    },\r\n    setSelectedVideo(file) {\r\n      if (!file.type.startsWith('video/')) {\r\n        alert('请选择视频文件')\r\n        return\r\n      }\r\n\r\n      const maxSize = 500 * 1024 * 1024 // 500MB\r\n      if (file.size > maxSize) {\r\n        alert('视频文件过大（超过500MB），请选择更小的文件')\r\n        return\r\n      }\r\n\r\n      if (this.videoPreview) {\r\n        URL.revokeObjectURL(this.videoPreview)\r\n      }\r\n\r\n      this.selectedFile = file\r\n      this.hasVideoUploaded = true\r\n      this.videoPreview = URL.createObjectURL(file)\r\n      // 同时保存视频的blob URL，供后续查看时使用\r\n      this.$data.selectedVideoUrl = this.videoPreview\r\n      this.extractVideoDuration(file)\r\n\r\n      if (!this.form.title) {\r\n        this.form.title = file.name.replace(/\\.[^/.]+$/, '')\r\n      }\r\n    },\r\n    handleCoverSelect(event) {\r\n      const file = event.target.files?.[0]\r\n      if (file) {\r\n        this.processCover(file)\r\n      }\r\n    },\r\n    handleCoverDrop(event) {\r\n      event.preventDefault()\r\n      const file = event.dataTransfer?.files?.[0]\r\n      if (file) {\r\n        this.processCover(file)\r\n      }\r\n    },\r\n    processCover(file) {\r\n      if (!file.type.startsWith('image/')) {\r\n        alert('请上传图片作为封面')\r\n        return\r\n      }\r\n\r\n      const maxSize = 2 * 1024 * 1024 // 2MB\r\n      if (file.size > maxSize) {\r\n        alert('封面图片过大（超过2MB），请选择较小的图片')\r\n        return\r\n      }\r\n      const reader = new FileReader()\r\n      reader.onload = (e) => {\r\n        this.coverFile = file\r\n        this.coverPreview = e.target.result\r\n        // 同时保存到sessionStorage用于临时存储\r\n        this.coverDataUrl = e.target.result\r\n      }\r\n      reader.onerror = () => {\r\n        alert('读取封面失败，请重试')\r\n      }\r\n      reader.readAsDataURL(file)\r\n    },\r\n    selectTopic(topicKey) {\r\n      this.selectedTopic = topicKey\r\n    },\r\n    saveVideo() {\r\n      if (!this.selectedFile) {\r\n        alert('请先选择要上传的视频')\r\n        return\r\n      }\r\n      this.processFile(this.selectedFile)\r\n    },\r\n    async processFile(file) {\r\n      const maxSize = 500 * 1024 * 1024 // 500MB\r\n      if (file.size > maxSize) {\r\n        alert('视频文件过大（超过500MB），请选择更小的文件')\r\n        return\r\n      }\r\n      \r\n      // 保存视频的blob URL到sessionStorage，供后续查看时使用\r\n      const videoUrl = URL.createObjectURL(file)\r\n      const videoId = Date.now()\r\n      sessionStorage.setItem(`videoBlob_${videoId}`, videoUrl)\r\n      \r\n      // 保存封面到sessionStorage（如果有的话）\r\n      let coverKey = null\r\n      if (this.coverDataUrl) {\r\n        coverKey = `coverBlob_${videoId}`\r\n        sessionStorage.setItem(coverKey, this.coverDataUrl)\r\n      }\r\n      \r\n      // 读取用户信息（用于获取用户名）\r\n      let userName = 'zk3zy' // 默认用户名\r\n      try {\r\n        const profileData = localStorage.getItem('profileUser')\r\n        if (profileData) {\r\n          const parsed = JSON.parse(profileData)\r\n          if (parsed.name) {\r\n            userName = parsed.name\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.warn('读取用户信息失败', err)\r\n      }\r\n      \r\n      const duration = this.videoDuration\r\n        ? this.formatDuration(Math.round(this.videoDuration))\r\n        : this.formatDuration(Math.floor(Math.random() * 300 + 10)) // 10-310秒兜底\r\n      const primaryTag = this.topicLabelMap[this.selectedTopic] || (this.selectedTopic || '未分类')\r\n      const title = (this.form.title && this.form.title.trim()) || file.name.replace(/\\.[^/.]+$/, '')\r\n      const desc = (this.form.desc && this.form.desc.trim()) || ''\r\n      const visibility = this.form.visibility === 'private' ? 'private' : 'public'\r\n      const isPrivate = visibility === 'private'\r\n      \r\n      // 不再将视频内联到localStorage，避免超出浏览器存储配额（10MB左右就可能失败）\r\n      let inlineVideoData = ''\r\n\r\n      const videoData = {\r\n        id: videoId,\r\n        title,\r\n        creator: userName,\r\n        duration: duration,\r\n        views: '0次观看',\r\n        tags: [primaryTag],\r\n        thumbnail: this.coverPreview || this.defaultThumbnail,\r\n        coverKey: coverKey,\r\n        desc,\r\n        visibility,\r\n        isPrivate,\r\n        uploadTime: new Date().toISOString(),\r\n        fileName: file.name,\r\n        fileSize: file.size,\r\n        fileType: file.type,\r\n        videoUrl: videoUrl,\r\n        videoData: inlineVideoData // 不再内联，避免localStorage超限；刷新后大文件需重传\r\n      }\r\n\r\n      // 保存到localStorage\r\n      this.saveVideoToWorks(videoData)\r\n\r\n      // 触发自定义事件，通知其他页面更新\r\n      window.dispatchEvent(new Event('userWorksUpdated'))\r\n\r\n      // 显示成功提示\r\n      alert('视频上传成功！已添加到我的作品')\r\n      this.resetForm()\r\n    },\r\n    extractVideoDuration(file) {\r\n      return new Promise((resolve) => {\r\n        const url = URL.createObjectURL(file)\r\n        const video = document.createElement('video')\r\n        video.preload = 'metadata'\r\n        video.onloadedmetadata = () => {\r\n          URL.revokeObjectURL(url)\r\n          this.videoDuration = video.duration || null\r\n          resolve(this.videoDuration)\r\n        }\r\n        video.onerror = () => {\r\n          URL.revokeObjectURL(url)\r\n          this.videoDuration = null\r\n          resolve(null)\r\n        }\r\n        video.src = url\r\n      })\r\n    },\r\n    formatDuration(seconds) {\r\n      const mins = Math.floor(seconds / 60)\r\n      const secs = seconds % 60\r\n      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\r\n    },\r\n    saveVideoToWorks(videoData) {\r\n      try {\r\n        // 从localStorage读取现有作品\r\n        const existingWorks = this.getUserWorks()\r\n        \r\n        // 添加新作品到列表开头\r\n        existingWorks.unshift(videoData)\r\n        \r\n        // 保存回localStorage\r\n        localStorage.setItem('userWorks', JSON.stringify(existingWorks))\r\n        \r\n        console.log('视频已保存到作品:', videoData)\r\n      } catch (err) {\r\n        console.error('保存作品失败', err)\r\n        alert('保存作品失败，请重试')\r\n      }\r\n    },\r\n    getUserWorks() {\r\n      try {\r\n        const works = localStorage.getItem('userWorks')\r\n        if (works) {\r\n          return JSON.parse(works)\r\n        }\r\n      } catch (err) {\r\n        console.warn('读取作品失败', err)\r\n      }\r\n      return []\r\n    },\r\n    resetForm() {\r\n      if (this.videoPreview) {\r\n        URL.revokeObjectURL(this.videoPreview)\r\n      }\r\n\r\n      this.isDragOver = false\r\n      this.selectedFile = null\r\n      this.videoPreview = ''\r\n      this.coverFile = null\r\n      this.coverPreview = ''\r\n      this.hasVideoUploaded = false\r\n      this.videoDuration = null\r\n      this.form.title = ''\r\n      this.form.desc = ''\r\n      this.form.visibility = 'public'\r\n      this.selectedTopic = ''\r\n\r\n      if (this.$refs.videoInput) {\r\n        this.$refs.videoInput.value = ''\r\n      }\r\n      if (this.$refs.coverInput) {\r\n        this.$refs.coverInput.value = ''\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.upload-page {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #fef7ff 0%, #f5f0ff 50%, #fff0f8 100%);\r\n  color: #2d2d2d;\r\n  font-family: 'Segoe UI', 'PingFang SC', 'Microsoft Yahei', sans-serif;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n}\r\n\r\n.page-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 24px 48px;\r\n  border-bottom: 1px solid rgba(255, 105, 180, 0.2);\r\n  background: rgba(255, 255, 255, 0.6);\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n.brand {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.logo {\r\n  width: 48px;\r\n  height: 48px;\r\n  border-radius: 14px;\r\n  background: linear-gradient(135deg, #ff69b4 0%, #9370db 50%, #48d1cc 100%);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: 700;\r\n  letter-spacing: 1px;\r\n  box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);\r\n}\r\n\r\n.brand-text h1 {\r\n  font-size: 1.2rem;\r\n  margin: 0;\r\n}\r\n\r\n.brand-text h1 {\r\n  color: #2d2d2d;\r\n}\r\n\r\n.brand-text p {\r\n  margin: 4px 0 0;\r\n  color: rgba(45, 45, 45, 0.6);\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.header-right {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.back-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 10px 20px;\r\n  background: rgba(255, 255, 255, 0.8);\r\n  border: 1px solid rgba(255, 105, 180, 0.3);\r\n  border-radius: 10px;\r\n  color: #2d2d2d;\r\n  font-size: 0.95rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.back-btn:hover {\r\n  background: rgba(255, 105, 180, 0.1);\r\n  border-color: rgba(255, 105, 180, 0.5);\r\n  color: #ff69b4;\r\n  transform: translateX(-2px);\r\n}\r\n\r\n.back-btn:active {\r\n  transform: translateX(0);\r\n}\r\n\r\n.back-icon {\r\n  font-size: 1.2rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.page-content {\r\n  display: flex;\r\n  flex: 1;\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n}\r\n\r\n.sidebar {\r\n  padding: 32px 24px;\r\n  border-right: 1px solid rgba(255, 105, 180, 0.2);\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: rgba(255, 255, 255, 0.6);\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n.publish-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 14px 20px;\r\n  background: linear-gradient(135deg, #ff69b4 0%, #9370db 50%, #48d1cc 100%);\r\n  border: none;\r\n  border-radius: 14px;\r\n  color: #fff;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n}\r\n\r\n.publish-btn:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 20px rgba(115, 102, 255, 0.3);\r\n}\r\n\r\n.publish-btn:active {\r\n  transform: translateY(0);\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.content {\r\n  padding: 48px 24px;\r\n  overflow-y: auto;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  justify-content: center;\r\n  width: 100%;\r\n}\r\n\r\n.upload-container {\r\n  width: 100%;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.right-column {\r\n  width: 100%;\r\n}\r\n\r\n.info-panel {\r\n  background: rgba(255, 255, 255, 0.9);\r\n  border: 1px solid rgba(255, 105, 180, 0.25);\r\n  border-radius: 16px;\r\n  padding: 16px;\r\n  box-shadow: 0 4px 20px rgba(255, 105, 180, 0.15);\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.info-title {\r\n  font-weight: 700;\r\n  color: #2d2d2d;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.field {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.field label {\r\n  font-weight: 600;\r\n  color: #2d2d2d;\r\n}\r\n\r\n.field input,\r\n.field textarea {\r\n  width: 100%;\r\n  border-radius: 12px;\r\n  border: 1px solid rgba(255, 105, 180, 0.3);\r\n  background: rgba(255, 255, 255, 0.8);\r\n  padding: 12px;\r\n  color: #2d2d2d;\r\n  font-size: 14px;\r\n  transition: border 0.2s ease, box-shadow 0.2s ease;\r\n}\r\n\r\n.field input:focus,\r\n.field textarea:focus {\r\n  border-color: #ff69b4;\r\n  outline: none;\r\n  box-shadow: 0 0 0 3px rgba(255, 105, 180, 0.15);\r\n}\r\n\r\n.field textarea {\r\n  resize: vertical;\r\n  min-height: 90px;\r\n}\r\n\r\n.field-hint {\r\n  font-size: 12px;\r\n  color: rgba(45, 45, 45, 0.55);\r\n  text-align: right;\r\n}\r\n\r\n.cover-upload-box {\r\n  position: relative;\r\n  border: 1px dashed rgba(255, 105, 180, 0.35);\r\n  border-radius: 12px;\r\n  width: 100%;\r\n  aspect-ratio: 16 / 9;\r\n  min-height: 220px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n  background: rgba(255, 255, 255, 0.5);\r\n  cursor: pointer;\r\n  transition: border 0.2s ease, box-shadow 0.2s ease;\r\n}\r\n\r\n.cover-upload-box:hover {\r\n  border-color: rgba(255, 105, 180, 0.5);\r\n  box-shadow: 0 8px 24px rgba(255, 105, 180, 0.2);\r\n}\r\n\r\n.cover-preview {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  display: block;\r\n  position: absolute;\r\n  inset: 0;\r\n}\r\n\r\n.cover-placeholder {\r\n  color: rgba(45, 45, 45, 0.6);\r\n  font-weight: 600;\r\n}\r\n\r\n.upload-area {\r\n  margin-top: 16px;\r\n  background: rgba(255, 255, 255, 0.8);\r\n  backdrop-filter: blur(10px);\r\n  border: 2px dashed rgba(255, 105, 180, 0.3);\r\n  border-radius: 20px;\r\n  padding: 140px 80px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 4px 20px rgba(255, 105, 180, 0.15);\r\n}\r\n\r\n.upload-area.success {\r\n  cursor: default;\r\n  border-style: solid;\r\n  border-color: rgba(255, 105, 180, 0.4);\r\n}\r\n\r\n.upload-area:hover {\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-color: rgba(255, 105, 180, 0.5);\r\n  box-shadow: 0 8px 30px rgba(255, 105, 180, 0.25);\r\n}\r\n\r\n.upload-area.drag-over {\r\n  background: rgba(255, 105, 180, 0.1);\r\n  border-color: #ff69b4;\r\n  transform: scale(1.02);\r\n  box-shadow: 0 12px 40px rgba(255, 105, 180, 0.3);\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 64px;\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.upload-text {\r\n  font-size: 1.1rem;\r\n  color: #2d2d2d;\r\n  margin: 0 0 16px;\r\n  font-weight: 600;\r\n}\r\n\r\n.upload-subtext {\r\n  font-size: 0.95rem;\r\n  color: rgba(45, 45, 45, 0.65);\r\n  margin: 0 0 12px;\r\n}\r\n\r\n.upload-note {\r\n  font-size: 0.9rem;\r\n  color: rgba(45, 45, 45, 0.7);\r\n  margin: 0;\r\n  line-height: 1.6;\r\n}\r\n\r\n.section-title {\r\n  font-weight: 700;\r\n  color: #2d2d2d;\r\n  margin: 0 0 10px;\r\n}\r\n\r\n.tag-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.tag {\r\n  padding: 10px 14px;\r\n  border: 1px solid rgba(255, 105, 180, 0.3);\r\n  border-radius: 12px;\r\n}\r\n.tag.active {\r\n  background: #ff69b4;\r\n  color: #fff;\r\n  border-color: #ff69b4;\r\n  box-shadow: 0 6px 18px rgba(255, 105, 180, 0.35);\r\n}\r\n\r\n.tag-hint {\r\n  font-size: 0.85rem;\r\n  color: rgba(45, 45, 45, 0.6);\r\n}\r\n\r\n.pill-group {\r\n  display: inline-flex;\r\n  gap: 8px;\r\n}\r\n\r\n.pill {\r\n  padding: 10px 14px;\r\n  border-radius: 999px;\r\n  border: 1px solid rgba(255, 105, 180, 0.3);\r\n  background: rgba(255, 255, 255, 0.8);\r\n  color: #2d2d2d;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.pill:hover {\r\n  border-color: rgba(255, 105, 180, 0.6);\r\n  box-shadow: 0 4px 14px rgba(255, 105, 180, 0.2);\r\n}\r\n\r\n.pill.active {\r\n  background: #ff69b4;\r\n  color: #fff;\r\n  border-color: #ff69b4;\r\n  box-shadow: 0 6px 18px rgba(255, 105, 180, 0.35);\r\n}\r\n\r\n.preview-player {\r\n  width: 100%;\r\n  border-radius: 12px;\r\n  background: #000;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: flex-end;\r\n  margin-top: 12px;\r\n}\r\n\r\n.btn {\r\n  padding: 12px 16px;\r\n  border-radius: 12px;\r\n  border: none;\r\n  font-weight: 700;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.btn.primary {\r\n  background: linear-gradient(135deg, #ff69b4 0%, #9370db 100%);\r\n  color: #fff;\r\n  box-shadow: 0 6px 18px rgba(255, 105, 180, 0.3);\r\n}\r\n\r\n.btn.primary:hover {\r\n  box-shadow: 0 8px 22px rgba(255, 105, 180, 0.35);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.btn.ghost {\r\n  background: rgba(255, 255, 255, 0.9);\r\n  color: #ff69b4;\r\n  border: 1px solid rgba(255, 105, 180, 0.4);\r\n}\r\n\r\n.btn.ghost:hover {\r\n  background: rgba(255, 105, 180, 0.05);\r\n  border-color: rgba(255, 105, 180, 0.6);\r\n}\r\n</style>\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}