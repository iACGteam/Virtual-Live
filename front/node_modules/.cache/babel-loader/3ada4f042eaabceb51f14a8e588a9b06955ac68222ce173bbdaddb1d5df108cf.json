{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nconst STORAGE_KEY = 'virtual-live-mock-users';\nconst defaultUsers = [{\n  username: 'admin',\n  email: 'admin@virtual.live',\n  password: 'admin123',\n  name: '系统管理员'\n}, {\n  username: 'demo',\n  email: 'demo@virtual.live',\n  password: 'user123',\n  name: '演示用户'\n}];\nfunction loadMockUsers() {\n  if (typeof window === 'undefined' || !window.localStorage) {\n    return defaultUsers.map(user => ({\n      ...user\n    }));\n  }\n  try {\n    const cached = window.localStorage.getItem(STORAGE_KEY);\n    if (cached) {\n      const parsed = JSON.parse(cached);\n      if (Array.isArray(parsed) && parsed.length) {\n        return parsed;\n      }\n    }\n  } catch (error) {\n    console.warn('[mockUsers] Failed to read from localStorage:', error);\n  }\n  return defaultUsers.map(user => ({\n    ...user\n  }));\n}\nfunction persistMockUsers(users) {\n  if (typeof window === 'undefined' || !window.localStorage) return;\n  try {\n    window.localStorage.setItem(STORAGE_KEY, JSON.stringify(users));\n  } catch (error) {\n    console.warn('[mockUsers] Failed to persist to localStorage:', error);\n  }\n}\nlet mockUsers = loadMockUsers();\n\n// 重新加载用户数据，确保获取最新的数据（包括新注册的用户和密码）\nfunction reloadMockUsers() {\n  mockUsers = loadMockUsers();\n}\nexport function findMockUser(username, password) {\n  // 每次查找前重新加载，确保获取最新的用户数据（包括密码）\n  reloadMockUsers();\n  const normalizedUsername = String(username || '').trim().toLowerCase();\n  const normalizedPassword = String(password || '');\n  return mockUsers.find(user => {\n    const usernameHit = user.username.toLowerCase() === normalizedUsername;\n    const emailHit = typeof user.email === 'string' && user.email.toLowerCase() === normalizedUsername;\n    return (usernameHit || emailHit) && user.password === normalizedPassword;\n  });\n}\nexport function listMockUsers() {\n  return mockUsers.map(user => {\n    const safeUser = {\n      ...user\n    };\n    delete safeUser.password;\n    return safeUser;\n  });\n}\nexport function isMockUsernameTaken(username) {\n  reloadMockUsers();\n  const normalized = String(username || '').trim().toLowerCase();\n  if (!normalized) return false;\n  return mockUsers.some(user => user.username.toLowerCase() === normalized);\n}\nexport function isMockEmailTaken(email) {\n  reloadMockUsers();\n  const normalized = String(email || '').trim().toLowerCase();\n  if (!normalized) return false;\n  return mockUsers.some(user => typeof user.email === 'string' && user.email.toLowerCase() === normalized);\n}\nexport function addMockUser({\n  username,\n  email,\n  password,\n  name\n}) {\n  reloadMockUsers(); // 确保使用最新的用户列表\n  const normalizedUsername = String(username || '').trim();\n  const normalizedEmail = String(email || '').trim();\n  const normalizedPassword = String(password || '');\n  if (!normalizedUsername || !normalizedEmail || !normalizedPassword) {\n    return null;\n  }\n  const newUser = {\n    username: normalizedUsername,\n    email: normalizedEmail.toLowerCase(),\n    password: normalizedPassword,\n    // 密码被明确保存\n    name: name || normalizedUsername\n  };\n  mockUsers.push(newUser);\n  persistMockUsers(mockUsers); // 保存到 localStorage，包括密码\n  return newUser;\n}\n\n// 更新用户密码\nexport function updateMockUserPassword(username, newPassword) {\n  reloadMockUsers(); // 确保使用最新的用户列表\n  const normalizedUsername = String(username || '').trim().toLowerCase();\n  const normalizedPassword = String(newPassword || '');\n  if (!normalizedUsername || !normalizedPassword) {\n    return false;\n  }\n  const userIndex = mockUsers.findIndex(user => {\n    const usernameHit = user.username.toLowerCase() === normalizedUsername;\n    const emailHit = typeof user.email === 'string' && user.email.toLowerCase() === normalizedUsername;\n    return usernameHit || emailHit;\n  });\n  if (userIndex === -1) {\n    return false;\n  }\n  mockUsers[userIndex].password = normalizedPassword;\n  persistMockUsers(mockUsers); // 保存到 localStorage\n  return true;\n}","map":{"version":3,"names":["STORAGE_KEY","defaultUsers","username","email","password","name","loadMockUsers","window","localStorage","map","user","cached","getItem","parsed","JSON","parse","Array","isArray","length","error","console","warn","persistMockUsers","users","setItem","stringify","mockUsers","reloadMockUsers","findMockUser","normalizedUsername","String","trim","toLowerCase","normalizedPassword","find","usernameHit","emailHit","listMockUsers","safeUser","isMockUsernameTaken","normalized","some","isMockEmailTaken","addMockUser","normalizedEmail","newUser","push","updateMockUserPassword","newPassword","userIndex","findIndex"],"sources":["C:/Users/13765/Desktop/vitualieve/front/Virtual-Live/front/src/data/mockUsers.js"],"sourcesContent":["const STORAGE_KEY = 'virtual-live-mock-users'\r\n\r\nconst defaultUsers = [\r\n  {\r\n    username: 'admin',\r\n    email: 'admin@virtual.live',\r\n    password: 'admin123',\r\n    name: '系统管理员'\r\n  },\r\n  {\r\n    username: 'demo',\r\n    email: 'demo@virtual.live',\r\n    password: 'user123',\r\n    name: '演示用户'\r\n  }\r\n]\r\n\r\nfunction loadMockUsers() {\r\n  if (typeof window === 'undefined' || !window.localStorage) {\r\n    return defaultUsers.map(user => ({ ...user }))\r\n  }\r\n\r\n  try {\r\n    const cached = window.localStorage.getItem(STORAGE_KEY)\r\n    if (cached) {\r\n      const parsed = JSON.parse(cached)\r\n      if (Array.isArray(parsed) && parsed.length) {\r\n        return parsed\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.warn('[mockUsers] Failed to read from localStorage:', error)\r\n  }\r\n\r\n  return defaultUsers.map(user => ({ ...user }))\r\n}\r\n\r\nfunction persistMockUsers(users) {\r\n  if (typeof window === 'undefined' || !window.localStorage) return\r\n  try {\r\n    window.localStorage.setItem(STORAGE_KEY, JSON.stringify(users))\r\n  } catch (error) {\r\n    console.warn('[mockUsers] Failed to persist to localStorage:', error)\r\n  }\r\n}\r\n\r\nlet mockUsers = loadMockUsers()\r\n\r\n// 重新加载用户数据，确保获取最新的数据（包括新注册的用户和密码）\r\nfunction reloadMockUsers() {\r\n  mockUsers = loadMockUsers()\r\n}\r\n\r\nexport function findMockUser(username, password) {\r\n  // 每次查找前重新加载，确保获取最新的用户数据（包括密码）\r\n  reloadMockUsers()\r\n  const normalizedUsername = String(username || '').trim().toLowerCase()\r\n  const normalizedPassword = String(password || '')\r\n  return mockUsers.find(user => {\r\n    const usernameHit = user.username.toLowerCase() === normalizedUsername\r\n    const emailHit = typeof user.email === 'string' && user.email.toLowerCase() === normalizedUsername\r\n    return (usernameHit || emailHit) && user.password === normalizedPassword\r\n  })\r\n}\r\n\r\nexport function listMockUsers() {\r\n  return mockUsers.map(user => {\r\n    const safeUser = { ...user }\r\n    delete safeUser.password\r\n    return safeUser\r\n  })\r\n}\r\n\r\nexport function isMockUsernameTaken(username) {\r\n  reloadMockUsers()\r\n  const normalized = String(username || '').trim().toLowerCase()\r\n  if (!normalized) return false\r\n  return mockUsers.some(user => user.username.toLowerCase() === normalized)\r\n}\r\n\r\nexport function isMockEmailTaken(email) {\r\n  reloadMockUsers()\r\n  const normalized = String(email || '').trim().toLowerCase()\r\n  if (!normalized) return false\r\n  return mockUsers.some(user => typeof user.email === 'string' && user.email.toLowerCase() === normalized)\r\n}\r\n\r\nexport function addMockUser({ username, email, password, name }) {\r\n  reloadMockUsers() // 确保使用最新的用户列表\r\n  const normalizedUsername = String(username || '').trim()\r\n  const normalizedEmail = String(email || '').trim()\r\n  const normalizedPassword = String(password || '')\r\n\r\n  if (!normalizedUsername || !normalizedEmail || !normalizedPassword) {\r\n    return null\r\n  }\r\n\r\n  const newUser = {\r\n    username: normalizedUsername,\r\n    email: normalizedEmail.toLowerCase(),\r\n    password: normalizedPassword, // 密码被明确保存\r\n    name: name || normalizedUsername\r\n  }\r\n\r\n  mockUsers.push(newUser)\r\n  persistMockUsers(mockUsers) // 保存到 localStorage，包括密码\r\n  return newUser\r\n}\r\n\r\n// 更新用户密码\r\nexport function updateMockUserPassword(username, newPassword) {\r\n  reloadMockUsers() // 确保使用最新的用户列表\r\n  const normalizedUsername = String(username || '').trim().toLowerCase()\r\n  const normalizedPassword = String(newPassword || '')\r\n\r\n  if (!normalizedUsername || !normalizedPassword) {\r\n    return false\r\n  }\r\n\r\n  const userIndex = mockUsers.findIndex(user => {\r\n    const usernameHit = user.username.toLowerCase() === normalizedUsername\r\n    const emailHit = typeof user.email === 'string' && user.email.toLowerCase() === normalizedUsername\r\n    return usernameHit || emailHit\r\n  })\r\n\r\n  if (userIndex === -1) {\r\n    return false\r\n  }\r\n\r\n  mockUsers[userIndex].password = normalizedPassword\r\n  persistMockUsers(mockUsers) // 保存到 localStorage\r\n  return true\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}